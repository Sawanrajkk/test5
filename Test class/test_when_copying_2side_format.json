{
  "source_file": "test_when_copying_2side_format.py",
  "lines": [
    "import logging\n",
    "from typing import Dict\n",
    "import sys\n",
    "from dunetuf.emulation.scan import ScanEmulation\n",
    "\n",
    "from tests.copy.copy_base import TestGivenEmptyQueueAndEmptyHistory\n",
    "from tests.copy.copy_utils import create_and_start_copy_job\n",
    "\n",
    "class TestWhenCopyingWith2SideFormatSettings(\n",
    "    TestGivenEmptyQueueAndEmptyHistory\n",
    "):\n",
    "    @classmethod\n",
    "    def setup_class(cls):\n",
    "        \"\"\"Initialize shared test resources.\"\"\"\n",
    "        super().setup_class()\n",
    "        scan_simulator_ip = sys.argv[sys.argv.index('scanSimulatorIP') + 1] if 'scanSimulatorIP' in sys.argv else None\n",
    "        scan_simulator_ip = None if scan_simulator_ip == 'None' else scan_simulator_ip\n",
    "        logging.info('Instantiating ScanEmulation with %s', scan_simulator_ip)\n",
    "        cls.scan_emulation = ScanEmulation(cls.cdm, cls.udw, cls.tcl, scan_simulator_ip)\n",
    "\n",
    "    @classmethod\n",
    "    def teardown_class(cls):\n",
    "        \"\"\"Clean up shared test resources.\"\"\"\n",
    "        super().teardown_class()\n",
    "\n",
    "    def setup_method(self):\n",
    "        \"\"\"Initialize test resources.\"\"\"\n",
    "        self.payload = {\n",
    "            \"src\": {\n",
    "                \"scan\": {\n",
    "                    \"mediaSize\": \"na_letter_8.5x11in\",\n",
    "                    \"plexMode\": \"simplex\",\n",
    "                    \"resolution\": \"e300Dpi\",\n",
    "                },\n",
    "            },\n",
    "            \"dest\": {\n",
    "                \"print\": {\n",
    "                    \"copies\": 5,\n",
    "                    \"mediaSize\": \"na_letter_8.5x11in\",\n",
    "                    \"plexMode\": \"simplex\",\n",
    "                }\n",
    "            },\n",
    "        }\n",
    "\n",
    "    def teardown_method(self):\n",
    "        \"\"\"Clean up resources after each test.\"\"\"\n",
    "        # Clear job queue\n",
    "        self.job_queue.cancel_all_jobs()\n",
    "        self.job_queue.wait_for_queue_empty()\n",
    "\n",
    "        # Clear job history\n",
    "        self.job_history.clear()\n",
    "        self.job_history.wait_for_history_empty()\n",
    "\n",
    "        # Restore default ticket\n",
    "        response = self.update_default_ticket_if_required(self.default_ticket)\n",
    "        assert response == 200    \n",
    "\n",
    "    \"\"\"\n",
    "    $$$$$_BEGIN_TEST_METADATA_DECLARATION_$$$$$\n",
    "        +purpose: multiple copy with flatbed\n",
    "        +test_tier: 1\n",
    "        +is_manual: False\n",
    "        +test_classification:System\n",
    "        +reqid: DUNE-17183\n",
    "        +timeout:120\n",
    "        +asset: Copy\n",
    "        +test_framework: TUF\n",
    "        +delivery_team:WalkupApps\n",
    "        +feature_team:CopySolns    \n",
    "        +name: TestWhenCopyingWith2SideFormatSettings::test_when_using_flatbed_with_simplex_then_succeeds\n",
    "        +categorization:\n",
    "            +segment:Platform\n",
    "            +area:Copy\n",
    "            +feature:CopySettings\n",
    "            +sub_feature:\n",
    "            +interaction:Headless\n",
    "            +test_type:Positive\n",
    "        +test:\n",
    "            +title:TestWhenCopyingWith2SideFormatSettings::test_when_using_flatbed_with_simplex_then_succeeds\n",
    "            +guid:52d15481-8278-4268-b228-3b8fcd37c90e\n",
    "            +dut:\n",
    "                +type: Simulator\n",
    "                +configuration:DeviceClass=MFP & DeviceFunction=Copy & ScannerInput=Flatbed\n",
    "                \n",
    "    $$$$$_END_TEST_METADATA_DECLARATION_$$$$$\n",
    "    \"\"\"\n",
    "\n",
    "    def test_when_using_flatbed_with_simplex_then_succeeds(self):\n",
    "        self.scan_emulation.media.unload_media(\"ADF\")\n",
    "        job_id = create_and_start_copy_job(self.copy, self.payload)\n",
    "\n",
    "        # Wait for copy job to complete\n",
    "        self.copy.wait_for_state(job_id, [\"completed\"])\n",
    "        self.scan_emulation.media.load_media(\"ADF\")\n",
    "\n",
    "    \"\"\"\n",
    "    $$$$$_BEGIN_TEST_METADATA_DECLARATION_$$$$$\n",
    "        +purpose: multiple copy with ADF\n",
    "        +test_tier: 1\n",
    "        +is_manual: False\n",
    "        +test_classification:System\n",
    "        +reqid: DUNE-17183\n",
    "        +timeout:120\n",
    "        +delivery_team:WalkupApps\n",
    "        +feature_team:CopySolns\n",
    "        +asset: Copy\n",
    "        +test_framework: TUF\n",
    "        +name: TestWhenCopyingWith2SideFormatSettings::test_when_using_adf_with_simplex_then_succeeds\n",
    "        +categorization:\n",
    "            +segment:Platform\n",
    "            +area:Copy\n",
    "            +feature:CopySettings\n",
    "            +sub_feature:\n",
    "            +interaction:Headless\n",
    "            +test_type:Positive\n",
    "        +test:\n",
    "            +title:TestWhenCopyingWith2SideFormatSettings::test_when_using_adf_with_simplex_then_succeeds\n",
    "            +guid:4e7eaf0c-4e17-4061-b423-b1c06a9a4cc9\n",
    "            +dut:\n",
    "                +type: Simulator\n",
    "                +configuration:DeviceClass=MFP & DeviceFunction=Copy & ScannerInput=AutomaticDocumentFeeder\n",
    "                \n",
    "    $$$$$_END_TEST_METADATA_DECLARATION_$$$$$\n",
    "    \"\"\"\n",
    "\n",
    "    def test_when_using_adf_with_simplex_then_succeeds(self): \n",
    "\n",
    "        self.scan_emulation.media.load_media(\"ADF\", 1)\n",
    "        job_id = create_and_start_copy_job(self.copy, self.payload)\n",
    "\n",
    "        # Wait for copy job to complete\n",
    "        self.copy.wait_for_state(job_id, [\"completed\"])\n",
    "        self.scan_emulation.media.load_media(\"ADF\")\n",
    "\n",
    "    \"\"\"\n",
    "    $$$$$_BEGIN_TEST_METADATA_DECLARATION_$$$$$\n",
    "        +purpose: simplex copy to duplex\n",
    "        +test_tier: 1\n",
    "        +is_manual: False\n",
    "        +delivery_team:WalkupApps\n",
    "        +feature_team:CopySolns\n",
    "        +test_classification:System\n",
    "        +reqid: DUNE-17184\n",
    "        +timeout:120\n",
    "        +asset: Copy\n",
    "        +test_framework: TUF\n",
    "        +name: TestWhenCopyingWith2SideFormatSettings::test_when_using_simplex_input_with_duplex_output_then_succeeds\n",
    "        +categorization:\n",
    "            +segment:Platform\n",
    "            +area:Copy\n",
    "            +feature:CopySettings\n",
    "            +sub_feature:\n",
    "            +interaction:Headless\n",
    "            +test_type:Positive\n",
    "        +test:\n",
    "            +title:TestWhenCopyingWith2SideFormatSettings::test_when_using_simplex_input_with_duplex_output_then_succeeds\n",
    "            +guid:46019c33-b512-413b-a2fb-f8eacbde8e21\n",
    "            +dut:\n",
    "                +type: Simulator\n",
    "                +configuration:DeviceClass=MFP & DeviceFunction=Copy & ScannerInput=AutomaticDocumentFeeder & CopyColorMode=Automatic\n",
    "                \n",
    "    $$$$$_END_TEST_METADATA_DECLARATION_$$$$$\n",
    "    \"\"\"\n",
    "\n",
    "    def test_when_using_simplex_input_with_duplex_output_then_succeeds(self):\n",
    "        payload = {\n",
    "            \"src\": {\n",
    "                \"scan\": {\n",
    "                    \"colorMode\": \"Automatic\",\n",
    "                    \"mediaSize\": \"na_letter_8.5x11in\",\n",
    "                    \"plexMode\": \"simplex\",\n",
    "                },\n",
    "            },\n",
    "            \"dest\": {\n",
    "                \"print\": {\n",
    "                    \"copies\": 1,\n",
    "                    \"mediaSize\": \"na_letter_8.5x11in\",\n",
    "                    \"plexMode\": \"duplex\",\n",
    "                }\n",
    "            },\n",
    "        }\n",
    "        self.scan_emulation.media.load_media(\"ADF\", 6)\n",
    "        job_id = create_and_start_copy_job(self.copy, payload)\n",
    "\n",
    "        # Wait for copy job to complete\n",
    "        self.copy.wait_for_state(job_id, [\"completed\"])\n",
    "        self.scan_emulation.media.load_media(\"ADF\",1)\n",
    "\n",
    "    \"\"\"\n",
    "    $$$$$_BEGIN_TEST_METADATA_DECLARATION_$$$$$\n",
    "        +purpose: Simple copy job\n",
    "        +test_tier: 1\n",
    "        +is_manual: False\n",
    "        +test_classification:System\n",
    "        +reqid: DUNE-9875\n",
    "        +timeout:120\n",
    "        +asset: Copy\n",
    "        +test_framework: TUF\n",
    "        +delivery_team:WalkupApps\n",
    "        +feature_team:CopySolns\n",
    "        +name: TestWhenCopyingWith2SideFormatSettings::test_when_using_adf_with_duplex_and_simplex_output_then_succeeds\n",
    "        +categorization:\n",
    "            +segment:Platform\n",
    "            +area:Copy\n",
    "            +feature:CopySettings\n",
    "            +sub_feature:\n",
    "            +interaction:Headless\n",
    "            +test_type:Positive\n",
    "        +test:\n",
    "            +title:TestWhenCopyingWith2SideFormatSettings::test_when_using_adf_with_duplex_and_simplex_output_then_succeeds\n",
    "            +guid:2f690c9a-9f13-4935-b3b9-0efe40513a21\n",
    "            +dut:\n",
    "                +type:Simulator\n",
    "                +configuration:DeviceClass=MFP & DeviceFunction=Copy & ScannerInput=AutomaticDocumentFeeder\n",
    "                \n",
    "    $$$$$_END_TEST_METADATA_DECLARATION_$$$$$\n",
    "    \"\"\"\n",
    "\n",
    "    def test_when_using_adf_with_duplex_and_simplex_output_then_succeeds(self):\n",
    "        payload = {\n",
    "            \"src\": {\n",
    "                \"scan\": {\n",
    "                    \"mediaSize\": \"na_letter_8.5x11in\",\n",
    "                    \"plexMode\": \"duplex\",\n",
    "                    \"resolution\": \"e300Dpi\",\n",
    "                },\n",
    "            },\n",
    "            \"dest\": {\n",
    "                \"print\": {\n",
    "                    \"copies\": 10,\n",
    "                    \"mediaSize\": \"na_letter_8.5x11in\",\n",
    "                    \"plexMode\": \"simplex\",\n",
    "                }\n",
    "            },\n",
    "        }\n",
    "\n",
    "        self.scan_emulation.media.load_media(\"ADF\", 1)\n",
    "        job_id = create_and_start_copy_job(self.copy, payload)\n",
    "\n",
    "        # Wait for copy job to complete\n",
    "        self.copy.wait_for_state(job_id, [\"completed\"])\n",
    "        self.scan_emulation.media.load_media(\"ADF\")\n"
  ]
}